(self.webpackChunk=self.webpackChunk||[]).push([[574],{5831:(t,e,a)=>{"use strict";a.d(e,{C:()=>s});var s={data:function(){return{}},created:function(){},methods:{getBadgeReviewType:function(t){return"SOLUTION"===t?"success":"COMPLAIN"===t?"danger":"secondary"},getBadgeStatus:function(t){return"PUBLISHED"===t?"success":"SUSPENDED"===t?"danger":"secondary"},getBadgeMembership:function(t){return"PREMIUM"===t?"primary":"EXTENDED"===t?"info":"STANDARD"===t?"success":"secondary"}}}},6165:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});var s={data:function(){return{isBusy:!1,routeName:"",querySortDesc:"",querySortBy:"",currentPage:1,perPage:10,totalRows:0}},created:function(){},watch:{},computed:{getTotalRows:function(){return this.filteredItemsData?Math.ceil(this.filteredItemsData.length):0},getTotalPages:function(){return this.filteredItemsData?Math.ceil(this.filteredItemsData.length/this.perPage):1}},methods:{onInput:function(){1!==this.currentPage&&(this.$router.replace({name:this.routeName,query:Object.assign({},this.$route.query,{page:1,search:this.search})}),this.currentPage=1)},isActivePageButton:function(t){return t==this.currentPage},getRowCount:function(t){return t.length},checkPage:function(){this.currentPage=Number(this.$route.query.page?this.$route.query.page:1)},linkGen:function(t){return{name:this.routeName,query:Object.assign({},this.$route.query,{page:t})}},changePage:function(t){this.$router.replace({name:this.routeName,query:Object.assign({},this.$route.query,{page:t})})},sortingChanged:function(t){console.log(t),this.$router.replace({query:Object.assign({},this.$route.query,{sortBy:t.sortBy,sortDesc:t.sortDesc})})},getSort:function(){var t=JSON.parse(void 0!==this.$route.query.sortDesc&&this.$route.query.sortDesc),e=this.$route.query.sortBy?this.$route.query.sortBy:"";this.querySortDesc=t,this.querySortBy=e},filterTarget:function(t){t==this.$route.query.filterTarget||"all"==t&&void 0===this.$route.query.filterTarget||(this.$router.replace({name:this.routeName,query:{filterTarget:t,page:1}}),this.search="")}}}},9859:(t,e,a)=>{"use strict";a.d(e,{e:()=>s});var s={data:function(){return{search:""}},watch:{search:function(t){var e=Object.assign({},{searchKey:this.selectedInputSearch,search:t});""==t&&(delete e.searchKey,delete e.search)}},computed:{}}},5523:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});const s={name:"SlotConfirmationModal",props:["title"],data:function(){return{openModal:!1}},created:function(){},methods:{ok:function(t){t.preventDefault(),this.$emit("ok")},cancel:function(){this.openModal=!1}}};const r=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-modal",{attrs:{title:t.title,"no-close-on-backdrop":"","no-close-on-esc":"","hide-header-close":""},on:{ok:t.ok,cancel:t.cancel},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[t._t("body")],2)}),[],!1,null,null,null).exports},3574:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>d});var s=a(5523),r=a(5831),i=a(9859),n=a(6165);const o={name:"UserDashboardMyReview",mixins:[r.C,{data:function(){return{FieldTableItems:[{key:"no",label:"No",class:"text-center",thStyle:{minWidth:"30px",width:"30px"}},{key:"company.name",label:"Company Name",tdClass:"truncate-cell",thStyle:{minWidth:"150px"}},{key:"review_title",label:"Title",thStyle:{minWidth:"175px",width:"175px"}},{key:"insight",label:"Insight",class:"text-center",thStyle:{minWidth:"125px",width:"125px"}},{key:"rating",label:"Rating",class:"text-center",thStyle:{minWidth:"125px",width:"125px"}},{key:"type",label:"Type",class:"text-center",thStyle:{minWidth:"100px",width:"100px"}},{key:"status",label:"Status",class:"text-center",thStyle:{minWidth:"100px",width:"100px"}},{key:"answered",label:"Answered",class:"text-center",thStyle:{minWidth:"75px",width:"75px"}},{key:"created_at",label:"Review Date",class:"text-center",thStyle:{minWidth:"150px",width:"150px"}},{key:"action",label:"",class:"text-center",thStyle:{minWidth:"75px",width:"75px"}}],itemsData:[],selectedInputSearch:"company",optionsInputSearch:[{value:"company",text:"Company"},{value:"title",text:"Title"}]}},computed:{filteredItemsData:function(){var t=this;return"company"==this.selectedInputSearch?this.itemsData.filter((function(e){return e.company.name.toLowerCase().indexOf(t.search.toLowerCase())>-1})):"title"==this.selectedInputSearch?this.itemsData.filter((function(e){return e.review_title.toLowerCase().indexOf(t.search.toLowerCase())>-1})):void 0}}},i.e,n.Z],components:{ConfirmationModal:s.Z},data:function(){return{isLoaded:!1,modalEditReview:!1,review_types:[],input:{id:null,index:null,company:"",title:"",description:"",rating:null,status:"",photo:"",review_type:{id:null}},items:[]}},mounted:function(){this.getData()},methods:{showModalEditReview:function(t){var e=this.itemsData.findIndex((function(e){return e.id==t}));this.input.title=this.itemsData[e].review_title,this.input.id=this.itemsData[e].id,this.input.description=this.itemsData[e].review_description,this.input.rating=this.itemsData[e].rating,this.input.photo=this.itemsData[e].photo,this.input.review_type=this.itemsData[e].review_type,this.input.status=this.itemsData[e].status,this.input.company=this.itemsData[e].company,this.input.company_respond=this.itemsData[e].company_respond,this.input.index=e,this.modalEditReview=!0},updateData:function(t){var e=this;t.preventDefault();var a=this.review_types.find((function(t){return t.value==e.input.review_type.id})),s={id:a.value,name:a.text};console.log(this.input.review_type.id),axios.patch("/user-dashboard/review/".concat(this.input.id),this.input).then((function(t){e.itemsData[e.input.index].review_title=e.input.title,e.itemsData[e.input.index].review_description=e.input.description,e.itemsData[e.input.index].rating=e.input.rating,e.itemsData[e.input.index].review_type=s,e.itemsData[e.input.index].status="IN REVIEW",console.log(t.data),e.toastSuccess(t.data.message),e.modalEditReview=!1})).catch((function(t){console.log(t)}))},showDeleteConfirmationModal:function(t){var e=this.itemsData.findIndex((function(e){return e.id==t}));this.input.id=this.itemsData[e].id,this.input.index=e,this.$refs.deleteReviewConfirmation.openModal=!0},deleteData:function(){var t=this;axios.delete("/user-dashboard/review/".concat(this.input.id)).then((function(e){t.itemsData.splice(t.input.index,1),console.log(e.data),t.toastSuccess(e.data.message),t.modalEditReview=!1,t.$refs.deleteReviewConfirmation.openModal=!1})).catch((function(t){console.log(t)}))},getData:function(){var t=this;axios.get("user-dashboard/review").then((function(e){t.itemsData=t.mutateKeyItemsData(e.data.reviews),t.review_types=t.mutateKey(e.data.review_types),console.log(t.itemsData),t.isLoaded=!0})).catch((function(t){console.log(t)}))},mutateKey:function(t){return t.map((function(t){return{value:t.id,text:t.range||t.name||t.description,state:!1}}))},mutateKeyItemsData:function(t){return t.map((function(t){return{id:t.id,company:t.company,review_title:t.title,review_description:t.description,rating:t.rating,company_respond:t.company_respond,visited:t.visited,photo:t.photo,like:t.like,dislike:t.dislike,review_type:t.review_type,status:t.review_status.name,created_at:t.created_at}}))}}};var l=a(1900);const c={name:"UserDashboardMyProfile",props:["userdata"],data:function(){return{input:{profile:"",email:"",name:""},errors:{profile:"",name:""},password:{current_password:"",password:"",password_confirmation:""},errors_password:{current_password:"",password:"",password_confirmation:""},isPasswordOpen:!1}},created:function(){},mounted:function(){this.input=this.userdata},computed:{stateCurrentPassword:function(){return"no-error"==this.errors_password.current_password||!this.errors_password.current_password&&null},statePassword:function(){return"no-error"==this.errors_password.password||!this.errors_password.password&&null},stateProfile:function(){return"no-error"==this.errors.profile||!this.errors.profile&&null},stateName:function(){return"no-error"==this.errors.name||!this.errors.name&&null}},methods:{updateData:function(){var t=this;axios.post("/user-dashboard/profile",this.input).then((function(e){t.toastSuccess(e.data.message);t.errors={profile:"",name:""}})).catch((function(e){console.log(e),t.toastError(e.response.data.message);var a=e.response.data.errors;t.errors.profile=a.profile?a.profile[0]:"no-error",t.errors.name=a.name?a.name[0]:"no-error"}))},updatePassword:function(){var t=this;axios.post("/user-dashboard/password",this.password).then((function(e){t.toastSuccess(e.data.message);t.password={current_password:"",password:"",password_confirmation:""},t.errors_password={current_password:"",password:"",password_confirmation:""}})).catch((function(e){console.log(e),t.toastError(e.response.data.message);var a=e.response.data.errors;t.errors_password.current_password=a.current_password?a.current_password[0]:"no-error",t.errors_password.password=a.password?a.password[0]:"no-error"}))}}};const u={name:"UserDashboard",props:["user"],components:{MyReview:(0,l.Z)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"min-height":"100px"}},[a("h3",{staticClass:"mb-3"},[t._v("My Reviews")]),t._v(" "),a("b-overlay",{attrs:{variant:"dark",show:!t.isLoaded,blur:""}}),t._v(" "),t.isLoaded&&t.itemsData.length>0?a("div",[a("b-row",[a("b-col",{staticClass:"mb-3",attrs:{xl:"4",md:"6"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-form-select",{attrs:{plain:"",options:t.optionsInputSearch},model:{value:t.selectedInputSearch,callback:function(e){t.selectedInputSearch=e},expression:"selectedInputSearch"}})],1),t._v(" "),a("b-form-input",{attrs:{autofocus:"",type:"text",placeholder:"Instant Search"},on:{input:t.onInput},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("b-input-group-append",[a("b-btn",{attrs:{disabled:!t.search},on:{click:function(e){t.search=""}}},[t._v("Clear")])],1)],1)],1),t._v(" "),t.getTotalPages>1?a("b-col",{staticStyle:{"overflow-y":"auto"},attrs:{xl:"8",md:"6"}},[a("b-pagination",{staticClass:"justify-content-end mb-0",attrs:{align:"right","total-rows":t.getTotalRows},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1):t._e()],1),t._v(" "),a("div",{staticStyle:{"overflow-y":"auto"}},[a("b-table",{attrs:{small:"",stacked:"sm",fields:t.FieldTableItems,items:t.filteredItemsData,"current-page":t.currentPage,"per-page":t.perPage},scopedSlots:t._u([{key:"cell(no)",fn:function(e){return[t._v("\n          "+t._s(e.index+1+(t.currentPage-1)*t.perPage)+"\n          ")]}},{key:"cell(review_title)",fn:function(e){return[t._v("\n          "+t._s(e.item.review_title)+"\n        ")]}},{key:"cell(insight)",fn:function(e){return[a("span",[t._v(t._s(e.item.visited)+" "),a("i",{staticClass:"fa fa-eye"})]),t._v(" "),a("span",[t._v(t._s(e.item.like)+" "),a("i",{staticClass:"fa fa-thumbs-up"})]),t._v(" "),a("span",[t._v(t._s(e.item.dislike)+" "),a("i",{staticClass:"fa fa-thumbs-down"})])]}},{key:"cell(type)",fn:function(e){return[a("b-badge",{staticClass:"p-1",attrs:{variant:t.getBadgeReviewType(e.item.review_type.name)}},[t._v("\n            "+t._s(e.item.review_type.name)+"\n          ")])]}},{key:"cell(status)",fn:function(e){return[a("b-badge",{staticClass:"p-1",attrs:{variant:t.getBadgeStatus(e.item.status)}},[t._v("\n            "+t._s(e.item.status)+"\n          ")])]}},{key:"cell(answered)",fn:function(e){return[e.item.company_respond?a("b-badge",{attrs:{variant:"success"}},[a("i",{staticClass:"fa fa-check"})]):t._e(),t._v(" "),e.item.company_respond?t._e():a("b-badge",{attrs:{variant:"danger"}},[a("i",{staticClass:"fa fa-close"})])]}},{key:"cell(rating)",fn:function(e){return[a("div",{staticClass:"w-100"},t._l(e.item.rating,(function(t){return a("i",{key:t,staticClass:"fa fa-star"})})),0),t._v("\n          "+t._s(e.item.rating)+" / 5\n        ")]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n          "+t._s(t._f("dateFormated")(e.item.created_at))+"\n        ")]}},{key:"cell(action)",fn:function(e){return[a("div",{staticClass:"d-inline-block"},[a("b-btn",{attrs:{variant:"success",size:"sm"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.showModalEditReview(e.item.id)}}},[a("i",{staticClass:"fa fa-pencil"})]),t._v(" "),a("b-btn",{attrs:{variant:"danger",size:"sm"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.showDeleteConfirmationModal(e.item.id)}}},[a("i",{staticClass:"fa fa-trash"})])],1)]}}],null,!1,3393942935)})],1)],1):t._e(),t._v(" "),t.isLoaded&&0==t.itemsData.length?a("b-alert",{attrs:{show:""}},[a("h4",[t._v("No Review Data")]),t._v(" "),a("hr"),t._v(" "),a("div",[t._v("\n      Review from you will be shown here\n    ")])]):t._e(),t._v(" "),t.isLoaded&&t.itemsData.length>0?a("b-modal",{on:{ok:t.updateData},scopedSlots:t._u([{key:"modal-title",fn:function(){return[a("strong",[t._v("Your review for "+t._s(t.input.company.name))])]},proxy:!0}],null,!1,1266125183),model:{value:t.modalEditReview,callback:function(e){t.modalEditReview=e},expression:"modalEditReview"}},[t._v(" "),a("b-form-group",{attrs:{id:"review-title",label:"Title","label-for":"review-title-input"}},[a("b-form-input",{attrs:{id:"review-title-input",trim:""},model:{value:t.input.title,callback:function(e){t.$set(t.input,"title",e)},expression:"input.title"}})],1),t._v(" "),a("b-form-group",{attrs:{id:"review-content",label:"Review","label-for":"review-content-input"}},[a("b-form-textarea",{attrs:{id:"review-content-input",rows:"3"},model:{value:t.input.description,callback:function(e){t.$set(t.input,"description",e)},expression:"input.description"}})],1),t._v(" "),t.input.photo?a("div",{staticClass:"mb-3"},[a("b-img",{attrs:{fluid:"",src:"/storage/reviewasset/"+t.input.photo}})],1):t._e(),t._v(" "),a("b-row",[a("b-col",{attrs:{col:""}},[a("b-form-group",{attrs:{id:"rating",label:"Rating","label-for":"rating-input"}},[a("b-form-rating",{staticClass:"pl-0",attrs:{id:"rating-input","icon-empty":"star-fill",inline:"","no-border":"",variant:"light"},model:{value:t.input.rating,callback:function(e){t.$set(t.input,"rating",e)},expression:"input.rating"}})],1)],1),t._v(" "),a("b-col",{attrs:{col:""}},[a("b-form-group",{attrs:{label:"Type"}},[a("b-form-select",{attrs:{plain:"",options:t.review_types},model:{value:t.input.review_type.id,callback:function(e){t.$set(t.input.review_type,"id",e)},expression:"input.review_type.id"}},[a("template",{slot:"first"},[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- Please Select Review Type --")])])],2)],1)],1),t._v(" "),a("b-col",{attrs:{col:""}},[a("b-form-group",{attrs:{id:"status",label:"Status","label-for":"status-input"}},[a("b-badge",{staticClass:"p-1",attrs:{variant:t.getBadgeStatus(t.input.status)}},[t._v("\n            "+t._s(t.input.status)+"\n          ")])],1)],1)],1),t._v(" "),t.input.company_respond?a("div",[a("hr"),t._v(" "),a("div",{staticClass:"d-flex mb-3 justify-content-between w-100"},[a("strong",{staticClass:"d-flex"},[t._v("\n          Replied from Brand Owner\n        ")]),t._v(" "),a("div",{staticClass:"text-muted"},[a("em",[t._v(t._s(t._f("dateFormated")(t.input.company_respond.created_at)))])])]),t._v(" "),a("div",{staticClass:"mb-3"},[a("div",{staticClass:"float-left mr-3 "},[t.input.company.avatar?a("b-img",{staticClass:"rounded rounded-circle",staticStyle:{width:"50px",heigh:"auto"},attrs:{fluid:"",src:"/storage/company/"+t.input.company.avatar}}):t._e(),t._v(" "),t.input.company.avatar?t._e():a("b-avatar",{attrs:{size:"50px"}},[a("i",{staticClass:"fa fa-briefcase fa-2x"})])],1),t._v(" "),a("div",{staticClass:"mt-2 "},[t._v("\n          "+t._s(t.input.company.name)+"\n        ")])]),t._v(" "),a("div",{staticClass:"pt-3"},[a("p",[t._v("\n          "+t._s(t.input.company_respond.description)+"\n        ")])])]):t._e()],1):t._e(),t._v(" "),a("confirmation-modal",{ref:"deleteReviewConfirmation",attrs:{title:"Delete Review"},on:{ok:t.deleteData},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",[t._v("\n        You are about to delete your review. You will lose your review, like, and dislike status.\n      ")])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports,MyProfile:(0,l.Z)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("h3",[t._v("My Profile")]),t._v(" "),a("b-form-group",{attrs:{label:"Email"}},[a("b-form-input",{attrs:{type:"email",disabled:""},model:{value:t.input.email,callback:function(e){t.$set(t.input,"email",e)},expression:"input.email"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Full Name","invalid-feedback":t.errors.name,state:t.stateName}},[a("b-form-input",{attrs:{type:"text",state:t.stateName},model:{value:t.input.name,callback:function(e){t.$set(t.input,"name",e)},expression:"input.name"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Profile","invalid-feedback":t.errors.profile,state:t.stateProfile}},[a("b-form-textarea",{attrs:{rows:"3",state:t.stateProfile},model:{value:t.input.profile,callback:function(e){t.$set(t.input,"profile",e)},expression:"input.profile"}})],1),t._v(" "),a("b-btn",{staticClass:"mt-3 float-right",attrs:{variant:"primary"},on:{click:t.updateData}},[t._v("Update Profile")])],1),t._v(" "),a("b-col",{attrs:{md:"6"}},[a("h3",[t._v("Change Password")]),t._v(" "),t.userdata.facebook_id||t.userdata.google_id?t._e():a("div",[a("b-form-group",{staticClass:"position-relative",attrs:{label:"Current Password","invalid-feedback":t.errors_password.current_password,state:t.stateCurrentPassword}},[a("b-form-input",{attrs:{type:t.isPasswordOpen?"text":"password",state:t.stateCurrentPassword},model:{value:t.password.current_password,callback:function(e){t.$set(t.password,"current_password",e)},expression:"password.current_password"}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:!t.isPasswordOpen,expression:"!isPasswordOpen"}],staticClass:"fa fa-eye position-absolute text-secondary",staticStyle:{top:"12px",right:"18px"},on:{click:function(e){t.isPasswordOpen=!0}}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.isPasswordOpen,expression:"isPasswordOpen"}],staticClass:"fa fa-eye-slash position-absolute text-secondary",staticStyle:{top:"12px",right:"18px"},on:{click:function(e){t.isPasswordOpen=!1}}})],1),t._v(" "),a("b-form-group",{attrs:{label:"New Password","invalid-feedback":t.errors_password.password,state:t.statePassword}},[a("b-form-input",{attrs:{type:t.isPasswordOpen?"text":"password",state:t.statePassword},model:{value:t.password.password,callback:function(e){t.$set(t.password,"password",e)},expression:"password.password"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Confirm New Password"}},[a("b-form-input",{attrs:{type:t.isPasswordOpen?"text":"password"},model:{value:t.password.password_confirmation,callback:function(e){t.$set(t.password,"password_confirmation",e)},expression:"password.password_confirmation"}})],1),t._v(" "),a("b-btn",{staticClass:"mt-auto float-right",attrs:{variant:"primary"},on:{click:t.updatePassword}},[t._v("Change Password")])],1),t._v(" "),t.userdata.facebook_id?a("div",[t._v("\n        You are registered this account using Facebook login. Please change password from your Facebook account.\n      ")]):t._e(),t._v(" "),t.userdata.google_id?a("div",[t._v("\n        You are registered this account using Google login. Please change password from your Google account.\n      ")]):t._e()])],1)],1)}),[],!1,null,null,null).exports},data:function(){return{component:"MyReview"}},created:function(){},methods:{logout:function(){window.open("/user-logout","_self")}}};const d=(0,l.Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-nav",{staticClass:"mb-3",staticStyle:{"overflow-x":"auto","overflow-y":"hidden","white-space":"nowrap","flex-wrap":"unset"},attrs:{tabs:""}},[a("b-nav-item",{attrs:{active:"MyReview"==t.component},on:{click:function(e){t.component="MyReview"}}},[t._v("My Review")]),t._v(" "),a("b-nav-item",{attrs:{active:"MyProfile"==t.component},on:{click:function(e){t.component="MyProfile"}}},[t._v("My Profile")]),t._v(" "),a("b-nav-item",[a("b-btn",{attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.logout()}}},[t._v("Log Out")])],1)],1),t._v(" "),a(t.component,{tag:"component",attrs:{userdata:t.user}})],1)}),[],!1,null,null,null).exports},1900:(t,e,a)=>{"use strict";function s(t,e,a,s,r,i,n,o){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),s&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),n?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=l):r&&(l=o?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}a.d(e,{Z:()=>s})}}]);